chrome.runtime.onMessage.addListener(function(e,t,l){document.querySelector(".loadingAni")&&(document.querySelector(".loadingAni").style.display="none"),document.querySelector("h1").style.display="none",document.querySelector("#titleSmall")&&(document.querySelector("#titleSmall").style.display="block"),document.querySelector("#dwnbtn")&&(document.querySelector("#dwnbtn").style.display="block"),document.querySelector(".titleBox")&&(document.querySelector(".titleBox").style.display="block"),document.querySelector(".cancelBox")&&(document.querySelector(".cancelBox").style.backgroundColor="#ffffff"),document.querySelector("#subheading")&&(document.querySelector("#subheading").style.fontSize="2rem");var n=document.getElementById("titleList");if(e.titleList){for(var c=0;c<e.titleList.length;c++){console.log(e);var o=document.createElement("li");o.setAttribute("class","titleItems");var d=document.createElement("INPUT");d.setAttribute("type","checkbox"),d.setAttribute("value",c),d.className="check";var i=e.titleList[c],r="";r=i.includes(".xlsx")||i.includes(".xls")?"url('assets/excelFile.png')":i.includes(".docx")||i.includes(".doc")?"url('assets/wordFile.png')":i.includes(".pptx")||i.includes(".ppt")?"url('assets/powerpointFile.png')":i.includes(".pdf")?"url('assets/pdfFile.png')":"url('assets/file.png')",o.appendChild(document.createTextNode(e.titleList[c])),o.style.listStyleImage=r,n.appendChild(o),n.appendChild(d),document.querySelector("h2").innerHTML=c+1+" files found!"}document.querySelector("#dwnbtn").style.display="block",document.querySelector("#selAllCheck").style.display="block",document.querySelector("#SAText").style.display="block",document.getElementById("selAllCheck").addEventListener("click",function(){if(1==this.checked)for(var t=0;t<e.titleList.length;t++)document.querySelectorAll(".check")[t].checked=!0,document.getElementById("selectedCount").innerHTML=e.titleList.length+" / "+e.titleList.length+" selected";else if(0==this.checked)for(var t=0;t<e.titleList.length;t++)document.querySelectorAll(".check")[t].checked=!1,document.getElementById("selectedCount").innerHTML="0 / "+e.titleList.length+" selected"});for(var s=0,u=0;u<e.titleList.length;u++)document.querySelectorAll(".check")[u].addEventListener("click",a);function a(){1==this.checked?++s:0==this.checked&&--s,document.getElementById("selectedCount").innerHTML=s+" / "+e.titleList.length+" selected"}document.getElementById("dwnbtn").addEventListener("click",function(){for(var t=document.getElementsByClassName("check"),l=[],n=[],c=0;c<t.length;c++)t[c].checked&&l.push(parseInt(t[c].value));for(u=0;u<l.length;u++){var o=l[u];n.push(e.hrefList[o])}for(var d=[],i=0;i<l.length;i++){var r=n[i].replace("open","uc");r+="&export=download";var s=window.open(r,"_blank","fullscreen=yes");d.push(s)}setTimeout(function(){for(var e=0;e<d.length;e++)d[e].close()},2e4)});for(u=0;u<e.titleList.length;u++)document.querySelectorAll(".titleItems")[u].addEventListener("click",m);function m(){var e=this.innerHTML;chrome.tabs.query({active:!0,currentWindow:!0},function(t){chrome.tabs.sendMessage(t[0].id,e)})}}});var cancelElement=document.getElementById("cancel");function getLinks(){chrome.tabs.executeScript({file:"background.js"}),document.querySelector("h2").innerHTML="Please wait while we scroll through the page and extract links!",document.getElementById("runScript").style.display="none",document.querySelector(".loadingAni").style.display="block",document.querySelector(".cancelBox").style.display="block"}cancelElement&&document.getElementById("cancel").addEventListener("click",function(){chrome.tabs.executeScript({code:"location.reload();"}),location.reload()}),document.addEventListener("DOMContentLoaded",()=>{document.getElementById("runScript").addEventListener("click",getLinks)});